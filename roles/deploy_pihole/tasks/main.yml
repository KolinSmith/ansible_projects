---
# Pi-hole Deployment and Configuration Role
# Supports both Docker Compose and traditional installations

# Step 1: Detect Pi-hole deployment type
- name: Detect Pi-hole deployment type (Docker vs Traditional)
  include_tasks: detect_pihole_type.yml

# Step 2a: If Docker-based Pi-hole detected, configure it
- name: Configure Docker-based Pi-hole
  include_tasks: configure_pihole_docker.yml
  when: pihole_is_docker | default(false)

# Step 2b: If traditional installation needed, install and configure
- name: Install and configure traditional Pi-hole
  include_tasks: install_pihole_traditional.yml
  when: not (pihole_is_docker | default(false))
