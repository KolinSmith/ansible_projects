#!/bin/bash
# Custom MOTD Header
# Generated by Ansible - install_custom_motd role

# Colors
GREEN='{{ motd_color_good }}'
CYAN='{{ motd_color_info }}'
NC='{{ motd_color_reset }}'

# Clear screen
clear

{% if motd_show_hostname %}
# Display hostname with figlet
if command -v figlet &> /dev/null; then
    echo -e "${GREEN}"
    figlet -f {{ motd_header_font }} "$(hostname)"
    echo -e "${NC}"
else
    echo -e "${GREEN}=== $(hostname) ===${NC}"
    echo ""
fi
{% endif %}

# System information
PRETTY_NAME=$(grep PRETTY_NAME /etc/os-release | cut -d'"' -f2)
KERNEL=$(uname -r)
ARCH=$(uname -m)

echo -e "${CYAN}System:${NC} ${PRETTY_NAME}"
echo -e "${CYAN}Kernel:${NC} ${KERNEL} (${ARCH})"

# Hardware info if available
if [ -f /proc/device-tree/model ]; then
    MODEL=$(tr -d '\0' < /proc/device-tree/model 2>/dev/null)
    [ -n "$MODEL" ] && echo -e "${CYAN}Hardware:${NC} ${MODEL}"
elif command -v dmidecode &> /dev/null 2>&1; then
    MODEL=$(dmidecode -s system-product-name 2>/dev/null | head -1)
    [ -n "$MODEL" ] && echo -e "${CYAN}Hardware:${NC} ${MODEL}"
fi

echo ""
